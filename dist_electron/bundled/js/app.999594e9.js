(()=>{"use strict";var e={8067:(e,t,l)=>{var s=l(2173);const n={id:"app"},o={class:"search-container"},c={class:"results-container"};function a(e,t,l,a,r,i){const d=(0,s.resolveComponent)("list-view"),p=(0,s.resolveComponent)("pdf-view");return(0,s.openBlock)(),(0,s.createElementBlock)("div",n,[(0,s.createElementVNode)("div",o,[(0,s.withDirectives)((0,s.createElementVNode)("input",{id:"query",class:"usr-input",type:"text",placeholder:"Search...","onUpdate:modelValue":t[0]||(t[0]=e=>r.query=e),tabindex:"0"},null,512),[[s.vModelText,r.query]]),(0,s.createElementVNode)("button",{class:"usr-btn",onClick:t[1]||(t[1]=e=>i.updateQuery(r.query)),tabindex:"0"}," Search ")]),(0,s.createElementVNode)("div",c,[(0,s.createVNode)(d,{class:"list-view",matches:r.results,selection:r.selection,onAddPage:i.addPageToSelection,onRemovePage:i.removePageFromSelection,onViewPage:i.viewPage},null,8,["matches","selection","onAddPage","onRemovePage","onViewPage"]),(0,s.createVNode)(p,{class:"pdf-view",selectedPage:r.selectedPage},null,8,["selectedPage"])])])}l(560);const r={class:"list-container"},i={key:0,class:"main-list"},d={class:"pdf-object"},p={class:"pdf-path"},u=["onClick"],h=["onClick"],m={class:"page-number"},g=["onClick"],k={key:1,class:"selected-list"},v={class:"pdf-object"},f={class:"pdf-path"},b=["onClick"],P={class:"page-number"},y=["onClick"];function E(e,t,l,n,o,c){return(0,s.openBlock)(),(0,s.createElementBlock)("div",r,[Object.keys(o.results).length>0||Object.keys(l.selection).length>0?((0,s.openBlock)(),(0,s.createElementBlock)("ul",i,[((0,s.openBlock)(!0),(0,s.createElementBlock)(s.Fragment,null,(0,s.renderList)(Object.entries(o.results),(([t,l])=>((0,s.openBlock)(),(0,s.createElementBlock)("ul",{class:"sub-list",key:t},[(0,s.createElementVNode)("li",d,[(0,s.createElementVNode)("h1",p,(0,s.toDisplayString)(t),1),(0,s.createElementVNode)("div",null,[(0,s.createElementVNode)("button",{class:"add-btn",onClick:l=>e.addPdf(t)},null,8,u)])]),((0,s.openBlock)(!0),(0,s.createElementBlock)(s.Fragment,null,(0,s.renderList)(l,(e=>((0,s.openBlock)(),(0,s.createElementBlock)("li",{class:"page-object",key:e.page,onClick:t=>c.viewPage(e)},[(0,s.createElementVNode)("h1",m,(0,s.toDisplayString)(e.page),1),(0,s.createElementVNode)("div",null,[(0,s.createElementVNode)("button",{class:"add-btn",onClick:t=>c.addPage(e)},null,8,g)])],8,h)))),128))])))),128))])):(0,s.createCommentVNode)("",!0),Object.keys(o.selected).length>0?((0,s.openBlock)(),(0,s.createElementBlock)("ul",k,[((0,s.openBlock)(!0),(0,s.createElementBlock)(s.Fragment,null,(0,s.renderList)(Object.entries(o.selected),(([t,l])=>((0,s.openBlock)(),(0,s.createElementBlock)("ul",{class:"sub-list",key:t},[(0,s.createElementVNode)("li",v,[(0,s.createElementVNode)("h1",f,(0,s.toDisplayString)(t),1),(0,s.createElementVNode)("div",null,[(0,s.createElementVNode)("button",{class:"remove-btn",onClick:l=>e.removePdf(t)},null,8,b)])]),((0,s.openBlock)(!0),(0,s.createElementBlock)(s.Fragment,null,(0,s.renderList)(l,(e=>((0,s.openBlock)(),(0,s.createElementBlock)("li",{class:"page-object",key:e.page},[(0,s.createElementVNode)("h1",P,(0,s.toDisplayString)(e.page),1),(0,s.createElementVNode)("div",null,[(0,s.createElementVNode)("button",{class:"remove-btn",onClick:t=>c.removePage(e)},null,8,y)])])))),128))])))),128))])):(0,s.createCommentVNode)("",!0)])}const V={props:{matches:{type:Object,required:!0},selection:{type:Object,required:!0}},watch:{matches(){this.selected={},this.results=this.matches},selection(){this.selected=this.selection,console.log(this.selected)}},data(){return{selected:{},results:{}}},mounted(){},methods:{addPage(e){const t=e.pdf,l=this.results[t],s=l.indexOf(e);l.splice(s,1),0===l.length&&delete this.results[t],this.$emit("add-page",e)},removePage(e){const t=e.pdf;t in this.results?this.results[t].push(e):this.results[t]=[e],this.$emit("remove-page",e)},viewPage(e){this.$emit("view-page",e)}}};var B=l(3744);const N=(0,B.Z)(V,[["render",E]]),O=N,w={id:"pdf-container"},C=["href"],j=["src"];function S(e,t,l,n,o,c){return(0,s.openBlock)(),(0,s.createElementBlock)("div",w,[(0,s.createElementVNode)("a",{ref:"pdf",href:o.selectedPagePath,target:"_blank",rel:"noopener noreferrer"},[(0,s.createElementVNode)("embed",{src:o.selectedPagePath,type:"application/pdf",width:"100%",height:"100%"},null,8,j)],8,C)])}const q={props:{selectedPage:{type:Object,required:!0}},data(){return{selectedPagePath:""}},watch:{selectedPage(){this.selectedPagePath=this.selectedPage.pdf}},mounted(){},methods:{updatePDF(e){const t=document.querySelector("embed");t.setAttribute("src",e)}}},x=(0,B.Z)(q,[["render",S]]),F=x,D={data(){return{query:"",results:{},selection:{},selectedPage:{}}},components:{ListView:O,PdfView:F},mounted(){},methods:{async updateQuery(e){this.clearSelection();const t=e,l=await fetch("http://localhost:5000/api/update_query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:t})}),s=await l.json();this.results=s.matches,console.log(JSON.stringify(this.results))},addPageToSelection(e){const t=e.pdf;t in this.selection?this.selection[t].push(e):this.selection[t]=[e],this.selection={...this.selection}},removePageFromSelection(e){const t=e.pdf,l=this.selection[t].indexOf(e);this.selection[t].splice(l,1),0===this.selection[t].length&&delete this.selection[t],this.selection={...this.selection}},clearSelection(){this.selection={}},viewPage(e){this.selectedPage=e,this.selectedPage={...this.selectedPage}}}},L=(0,B.Z)(D,[["render",a]]),T=L;(0,s.createApp)(T).mount("#app")}},t={};function l(s){var n=t[s];if(void 0!==n)return n.exports;var o=t[s]={exports:{}};return e[s].call(o.exports,o,o.exports,l),o.exports}l.m=e,(()=>{var e=[];l.O=(t,s,n,o)=>{if(!s){var c=1/0;for(d=0;d<e.length;d++){for(var[s,n,o]=e[d],a=!0,r=0;r<s.length;r++)(!1&o||c>=o)&&Object.keys(l.O).every((e=>l.O[e](s[r])))?s.splice(r--,1):(a=!1,o<c&&(c=o));if(a){e.splice(d--,1);var i=n();void 0!==i&&(t=i)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[s,n,o]}})(),(()=>{l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{var e={143:0};l.O.j=t=>0===e[t];var t=(t,s)=>{var n,o,[c,a,r]=s,i=0;if(c.some((t=>0!==e[t]))){for(n in a)l.o(a,n)&&(l.m[n]=a[n]);if(r)var d=r(l)}for(t&&t(s);i<c.length;i++)o=c[i],l.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return l.O(d)},s=global["webpackChunkvue_flask"]=global["webpackChunkvue_flask"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var s=l.O(void 0,[998],(()=>l(8067)));s=l.O(s)})();
//# sourceMappingURL=app.999594e9.js.map